
//======================================================================================================================
var Item = cc.IObject.extend({

    //------------------------------------------------------------------------------------------------------------------
    ctor: function(def)
    {
        this._super();

        //
        this._define = def;
        this._count = cc.GameDataNumber.create(this.getItemName(), 0, _DB_OP_GAME_ITEMS, Defines.MAX_ITEM_COUNT);
    },

    //------------------------------------------------------------------------------------------------------------------
    description: function()
    {
        return "Item";
    },

    //------------------------------------------------------------------------------------------------------------------
    toString: function()
    {
        //
        return this.description() + " = "
            + this.getItemID() + "|"
            + this.getItemName() + "|"
            + this.getCurrentCount();
    },

    //------------------------------------------------------------------------------------------------------------------
    getDefine: function()
    {
        return this._define;
    },

    //------------------------------------------------------------------------------------------------------------------
    getItemName: function()
    {
        return this.getDefine().NAME;
    },

    //------------------------------------------------------------------------------------------------------------------
    getItemID: function()
    {
        return this.getDefine().ID;
    },

    //------------------------------------------------------------------------------------------------------------------
    getCurrentCount: function()
    {
        return this._count.get();
    },

    //------------------------------------------------------------------------------------------------------------------
    load: function()
    {
        this._count.load();
        return this;
    },

    //------------------------------------------------------------------------------------------------------------------
    addItemCount: function(addValue)
    {
        this._count.add(addValue);
        this._count.save();
        return this;
    },

    //------------------------------------------------------------------------------------------------------------------
    restore: function()
    {
        this._count.set(0);
        this._count.save();
        return this;
    }
});

//
Item.create = function(def)
{
    return new Item(def);
};
